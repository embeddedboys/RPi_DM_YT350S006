"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[628],{178:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>o,contentTitle:()=>r,default:()=>d,frontMatter:()=>l,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"develop/software","title":"\u8f6f\u4ef6\u6784\u6210","description":"\u4e00\u822c\u6765\u8bf4\uff0c\u4e00\u5757\u5e26\u6709\u89e6\u6478\u9762\u677f\u7684\u663e\u793a\u5c4f\uff0c\u5176\u9a71\u52a8\u4e3b\u8981\u7531\u4e09\u4e2a\u7ec4\u4ef6\u6784\u6210\uff0c\u663e\u793a\u3001\u80cc\u5149\u548c\u89e6\u6478\u3002","source":"@site/docs/develop/software.md","sourceDirName":"develop","slug":"/develop/software","permalink":"/RPi_DM_YT350S006/docs/develop/software","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/develop/software.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"\u8bf4\u660e","permalink":"/RPi_DM_YT350S006/docs/develop/note"},"next":{"title":"\u9002\u914d\u65b0\u5c4f\u5e55","permalink":"/RPi_DM_YT350S006/docs/develop/adapt"}}');var c=n(4848),s=n(8453);const l={sidebar_position:2},r="\u8f6f\u4ef6\u6784\u6210",o={},a=[{value:"1. \u663e\u793a",id:"1-\u663e\u793a",level:2},{value:"&quot;panel-mipi-dbi-spi&quot;",id:"panel-mipi-dbi-spi",level:3},{value:"2. \u80cc\u5149",id:"2-\u80cc\u5149",level:2},{value:"&quot;gpio-backlight&quot;",id:"gpio-backlight",level:3},{value:"&quot;pwm-backlight&quot;",id:"pwm-backlight",level:3},{value:"&quot;gpio-leds&quot;",id:"gpio-leds",level:3},{value:"3. \u89e6\u6478",id:"3-\u89e6\u6478",level:2},{value:"&quot;goodix,gt911&quot;",id:"goodixgt911",level:3},{value:"&quot;focaltech,ft6236&quot;",id:"focaltechft6236",level:3},{value:"&quot;ti,tsc2007&quot;",id:"titsc2007",level:3}];function p(t){const e={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...t.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(e.header,{children:(0,c.jsx)(e.h1,{id:"\u8f6f\u4ef6\u6784\u6210",children:"\u8f6f\u4ef6\u6784\u6210"})}),"\n",(0,c.jsx)(e.p,{children:"\u4e00\u822c\u6765\u8bf4\uff0c\u4e00\u5757\u5e26\u6709\u89e6\u6478\u9762\u677f\u7684\u663e\u793a\u5c4f\uff0c\u5176\u9a71\u52a8\u4e3b\u8981\u7531\u4e09\u4e2a\u7ec4\u4ef6\u6784\u6210\uff0c\u663e\u793a\u3001\u80cc\u5149\u548c\u89e6\u6478\u3002"}),"\n",(0,c.jsx)(e.p,{children:"\u5728\u8be5\u9879\u76ee\u4e2d\uff0c\u663e\u793a\u63a5\u53e3\u4e3a SPI \uff0c\u80cc\u5149\u63a5\u53e3\u4e3a GPIO/PWM\uff0c\u89e6\u6478\u63a5\u53e3\u4e3a I2C\u3002"}),"\n",(0,c.jsx)(e.p,{children:"\u539f\u5219\u4e0a\uff0c\u82e5\u975e\u5fc5\u8981\uff0c\u5e94\u907f\u514d\u5bf9\u5185\u6838\u4ee3\u7801\u53ca\u914d\u7f6e\u8fdb\u884c\u4fee\u6539\u3002"}),"\n",(0,c.jsxs)(e.p,{children:["\u6587\u4e2d\u793a\u4f8b\u6240\u4f7f\u7528\u7684\u5e73\u53f0\u4e3a ",(0,c.jsx)(e.a,{href:"https://wiki.luckfox.com/zh/Luckfox-Pico-Pi/",children:"Luckfox Pico Pi"})]}),"\n",(0,c.jsx)(e.h2,{id:"1-\u663e\u793a",children:"1. \u663e\u793a"}),"\n",(0,c.jsxs)(e.p,{children:["\u9ed8\u8ba4\u4f7f\u7528 ",(0,c.jsx)(e.a,{href:"https://elixir.bootlin.com/linux/v6.16/source/drivers/gpu/drm/tiny/panel-mipi-dbi.c",children:'"panel-mipi-dbi-spi"'})," \u9a71\u52a8"]}),"\n",(0,c.jsx)(e.p,{children:"\u5982\u4e0b\u662f\u8bbe\u5907\u6811\u8282\u70b9\u793a\u4f8b:"}),"\n",(0,c.jsx)(e.h3,{id:"panel-mipi-dbi-spi",children:(0,c.jsx)(e.a,{href:"https://elixir.bootlin.com/linux/v6.16/source/drivers/gpu/drm/tiny/panel-mipi-dbi.c",children:'"panel-mipi-dbi-spi"'})}),"\n",(0,c.jsx)(e.p,{children:"pinctrl \u914d\u7f6e"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-c",children:"&pinctrl {\n\ttft {\n\t\ttft_pins: tft_pins {\n\t\t\trockchip,pins =\n\t\t\t\t/* tft_dc */\n\t\t\t\t<1 RK_PD1 RK_FUNC_GPIO &pcfg_pull_none>,\n\t\t\t\t/* tft_reset */\n\t\t\t\t<1 RK_PD3 RK_FUNC_GPIO &pcfg_pull_none>;\n\t\t};\n\t};\n};\n"})}),"\n",(0,c.jsx)(e.p,{children:"SPI \u8bbe\u5907\u8282\u70b9\u914d\u7f6e"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-c",children:'&spi0 {\n\tstatus = "okay";\n\n\tspidev@0 {\n\t\tstatus = "disabled";\n\t\tspi-max-frequency = <50000000>;\n\t};\n\n\tpanel-mipi-dbi@0 {\n\t\t#address-cells = <1>;\n\t\t#size-cells = <1>;\n\n\t\tpinctrl-names = "default";\n\t\tpinctrl-0 = <&tft_pins>;\n\n\t\tcompatible = "panel-mipi-dbi-spi";\n\n\t\tspi-max-frequency = <50000000>;\n\t\treg = <0>;\n\n\t\twidth-mm = <55>;\n\t\theight-mm = <84>;\n\n\t\treset-gpios = <&gpio1 RK_PD3 GPIO_ACTIVE_HIGH>;\n\t\tdc-gpios = <&gpio1 RK_PD1 GPIO_ACTIVE_HIGH>;\n\t\twrite-only;\n\n\t\tstatus = "okay";\n\n\t\tpanel-timing {\n\t\t\thactive = <480>;\n\t\t\tvactive = <320>;\n\t\t\thback-porch = <0>;\n\t\t\tvback-porch = <0>;\n\n\t\t\tclock-frequency = <0>;\n\t\t\thfront-porch = <0>;\n\t\t\thsync-len = <0>;\n\t\t\tvfront-porch = <0>;\n\t\t\tvsync-len = <0>;\n\t\t};\n\t};\n};\n'})}),"\n",(0,c.jsx)(e.h2,{id:"2-\u80cc\u5149",children:"2. \u80cc\u5149"}),"\n",(0,c.jsxs)(e.p,{children:["\u5148\u4f7f\u7528 ",(0,c.jsx)(e.a,{href:"https://elixir.bootlin.com/linux/v6.16/source/drivers/video/backlight/gpio_backlight.c",children:'"gpio-backlight"'})," \u9a71\u52a8\u6d4b\u8bd5\u80cc\u5149\uff0c\u5982\u679c\u76ee\u6807\u5e73\u53f0\u4e0a\u5bf9\u5e94\u5c4f\u5e55\u80cc\u5149\u63a7\u5236\u5f15\u811a\u5177\u6709PWM\u529f\u80fd\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528 ",(0,c.jsx)(e.a,{href:"https://elixir.bootlin.com/linux/v6.16/source/drivers/video/backlight/pwm_bl.c",children:'"pwm-backlight"'})," \u9a71\u52a8\u3002 \u5982\u679c\u4ee5\u4e0a\u6761\u4ef6\u5747\u4e0d\u6ee1\u8db3\uff0c\u53ef\u4ee5\u4f7f\u7528 ",(0,c.jsx)(e.a,{href:"https://elixir.bootlin.com/linux/v6.16/source/drivers/leds/leds-gpio.c",children:'"gpio-leds"'})," \u9a71\u52a8\u70b9\u4eae\u80cc\u5149\u3002"]}),"\n",(0,c.jsx)(e.h3,{id:"gpio-backlight",children:(0,c.jsx)(e.a,{href:"https://elixir.bootlin.com/linux/v6.16/source/drivers/video/backlight/gpio_backlight.c",children:'"gpio-backlight"'})}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-c",children:'backlight: backlight {\n\tcompatible = "gpio-backlight";\n\tgpios = <&gpio1 RK_PC6 GPIO_ACTIVE_HIGH>;\n\tdefault-on;\n};\n'})}),"\n",(0,c.jsx)(e.h3,{id:"pwm-backlight",children:(0,c.jsx)(e.a,{href:"https://elixir.bootlin.com/linux/v6.16/source/drivers/video/backlight/pwm_bl.c",children:'"pwm-backlight"'})}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-c",children:'&pwm10 {\n\tstatus = "okay";\n\tpinctrl-0 = <&pwm10m1_pins>;\n};\n'})}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-c",children:'backlight: backlight {\n\tcompatible = "pwm-backlight";\n\tpwms = <&pwm10 0 50000 0>;\n\tbrightness-levels = <0 4 8 16 32 64 128 255>;\n\tdefault-brightness-level = <7>;\n\tstatus = "okay";\n};\n'})}),"\n",(0,c.jsxs)(e.p,{children:["\u6ce8\u610f\u4e00\u4e0b\uff0c\u5982\u679c\u4f7f\u7528 ",(0,c.jsx)(e.strong,{children:"gpio-backlight"})," \u6216\u8005 ",(0,c.jsx)(e.strong,{children:"pwm-backlight"})," \u9a71\u52a8\uff0c\u9700\u8981\u5728 panel-mipi-dbi \u8282\u70b9\u4e2d\u6dfb\u52a0\u5982\u4e0b\u5c5e\u6027"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-c",children:"backlight = <&backlight>; // \u653e\u5230 panel-timing \u914d\u7f6e\u4e4b\u524d\n"})}),"\n",(0,c.jsx)(e.h3,{id:"gpio-leds",children:(0,c.jsx)(e.a,{href:"https://elixir.bootlin.com/linux/v6.16/source/drivers/leds/leds-gpio.c",children:'"gpio-leds"'})}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-c",children:'bl_leds {\n\tcompatible = "gpio-leds";\n\n\tpinctrl-names = "default";\n\tpinctrl-0 = <&bl_pins>;\n\n\tbl_led0 {\n\t\tlabel = "disaplay:backlight:led0";\n\t\tgpios = <&gpio1 RK_PC6 GPIO_ACTIVE_HIGH>;\n\t\tdefault-state = "on";\n\t};\n};\n'})}),"\n",(0,c.jsx)(e.h2,{id:"3-\u89e6\u6478",children:"3. \u89e6\u6478"}),"\n",(0,c.jsxs)(e.p,{children:["\u6839\u636e\u89e6\u6478IC\u578b\u53f7\u9009\u62e9\u5408\u9002\u7684\u9a71\u52a8\uff0c\u76ee\u524d\u4e3b\u6d41\u89e6\u6478\u6709 GT911 \u4f7f\u7528 ",(0,c.jsx)(e.a,{href:"https://elixir.bootlin.com/linux/v6.16/source/drivers/input/touchscreen/goodix.c",children:'"goodix,gt911"'}),"\uff0cFT6236 \u4f7f\u7528 ",(0,c.jsx)(e.a,{href:"https://elixir.bootlin.com/linux/v6.16/source/drivers/input/touchscreen/edt-ft5x06.c",children:'"focaltech,ft6236"'})," \uff0c\u7535\u963b\u89e6\u6478\u5c4f\u4f7f\u7528 NS2009 \u6216 TSC2007\uff0c\u5bf9\u5e94 ",(0,c.jsx)(e.a,{href:"https://elixir.bootlin.com/linux/v6.16/source/drivers/input/touchscreen/tsc2007_core.c",children:'"ti,tsc2007"'})," \uff08NS2009 \u662f TSC2007\u7684\u517c\u5bb9\u578b\u53f7\uff0c\u4e3b\u8981\u533a\u522b\u662f NS2009 \u65e0\u786c\u4ef6\u6ee4\u6ce2\uff09"]}),"\n",(0,c.jsx)(e.h3,{id:"goodixgt911",children:(0,c.jsx)(e.a,{href:"https://elixir.bootlin.com/linux/v6.16/source/drivers/input/touchscreen/goodix.c",children:'"goodix,gt911"'})}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-c",children:'&i2c2 {\n\tstatus = "okay";\n\n\ttouchscreen: gt911@0x5d {\n\t\tstatus = "okay";\n\n\t\tcompatible = "goodix,gt911";\n\t\treg = <0x5d>;\n\t\tpinctrl-names = "default";\n\t\tpinctrl-0 = <&ts_pins>;\n\t\tinterrupt-parent = <&gpio2>;\n\t\tinterrupts = <RK_PA7 IRQ_TYPE_EDGE_FALLING>;\n\t\tirq-gpios = <&gpio2 RK_PA7 GPIO_ACTIVE_HIGH>;\n\t\treset-gpios = <&gpio2 RK_PA6 GPIO_ACTIVE_HIGH>;\n\t\ttouchscreen-swapped-x-y;\n\t\ttouchscreen-inverted-x;\n\t};\n};\n'})}),"\n",(0,c.jsx)(e.h3,{id:"focaltechft6236",children:(0,c.jsx)(e.a,{href:"https://elixir.bootlin.com/linux/v6.16/source/drivers/input/touchscreen/edt-ft5x06.c",children:'"focaltech,ft6236"'})}),"\n",(0,c.jsx)(e.admonition,{type:"warning",children:(0,c.jsx)(e.p,{children:"\u4e0b\u9762\u7684\u914d\u7f6e\u662f\u6811\u8393\u6d3e\u5e73\u53f0\u7684"})}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-c",children:'ft6236: ft6236@38 {\n\tcompatible = "focaltech,ft6236";\n\treg = <0x38>;\n\tpinctrl-names = "default";\n\tpinctrl-0 = <&focaltech_pins>;\n\tinterrupt-parent = <&gpio>;\n\tinterrupts = <23 2>; // IRQ_TYPE_EDGE_FALLING\n\treset-gpios = <&gpio 24 1>; // GPIO_ACTIVE_LOW\n\ttouchscreen-size-x = <320>;\n\ttouchscreen-size-y = <480>;\n\ttouchscreen-swapped-x-y;\n\ttouchscreen-inverted-x;\n};\n'})}),"\n",(0,c.jsx)(e.h3,{id:"titsc2007",children:(0,c.jsx)(e.a,{href:"https://elixir.bootlin.com/linux/v6.16/source/drivers/input/touchscreen/tsc2007_core.c",children:'"ti,tsc2007"'})}),"\n",(0,c.jsx)(e.admonition,{type:"warning",children:(0,c.jsx)(e.p,{children:"\u4e0b\u9762\u7684\u914d\u7f6e\u662f\u6811\u8393\u6d3e\u5e73\u53f0\u7684"})}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-c",children:'tsc2007: tsc2007@49 {\n\tcompatible = "ti,tsc2007";\n\treg = <0x49>;\n\tpinctrl-names = "default";\n\tpinctrl-0 = <&ti_pins>;\n\tinterrupt-parent = <&gpio>;\n\tinterrupts = <4 0x2>; // IRQ_TYPE_EDGE_FALLING\n\tgpios = <&gpio 4 1>; // GPIO_ACTIVE_LOW\n\tti,x-plate-ohms = <257>;\n\tti,fuzzx = <320>;\n\tti,fuzzy = <480>;\n};\n'})})]})}function d(t={}){const{wrapper:e}={...(0,s.R)(),...t.components};return e?(0,c.jsx)(e,{...t,children:(0,c.jsx)(p,{...t})}):p(t)}},8453:(t,e,n)=>{n.d(e,{R:()=>l,x:()=>r});var i=n(6540);const c={},s=i.createContext(c);function l(t){const e=i.useContext(s);return i.useMemo((function(){return"function"==typeof t?t(e):{...e,...t}}),[e,t])}function r(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(c):t.components||c:l(t.components),i.createElement(s.Provider,{value:e},t.children)}}}]);
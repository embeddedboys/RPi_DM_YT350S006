"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[469],{1141:(n,e,d)=>{d.r(e),d.d(e,{assets:()=>_,contentTitle:()=>a,default:()=>l,frontMatter:()=>c,metadata:()=>i,toc:()=>x});const i=JSON.parse('{"id":"develop/adapt","title":"\u9002\u914d\u65b0\u5c4f\u5e55","description":"\u672c\u6587\u4ecb\u7ecd\u4e86\u5982\u4f55\u5c06\u8be5\u9879\u76ee\u7684\u9a71\u52a8\u7a0b\u5e8f\u9002\u914d\u5230\u65b0\u7684\u5c4f\u5e55\uff0c\u4e0b\u9762\u4ee5 CL35BC1017-40A (\u73b0\u6709\u578b\u53f7CL35BC219-40A \u7684 TFT1 \u7248\u672c) \u4e3a\u4f8b\u6765\u4ecb\u7ecd\u6574\u4e2a\u9002\u914d\u8fc7\u7a0b\u3002","source":"@site/docs/develop/adapt.md","sourceDirName":"develop","slug":"/develop/adapt","permalink":"/RPi_DM_YT350S006/docs/develop/adapt","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/develop/adapt.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"\u8f6f\u4ef6\u6784\u6210","permalink":"/RPi_DM_YT350S006/docs/develop/software"},"next":{"title":"\u79fb\u690d\u5230\u5176\u4ed6\u5e73\u53f0","permalink":"/RPi_DM_YT350S006/docs/develop/porting"}}');var t=d(4848),s=d(8453);const c={sidebar_position:3},a="\u9002\u914d\u65b0\u5c4f\u5e55",_={},x=[{value:"\u51c6\u5907\u5de5\u4f5c",id:"\u51c6\u5907\u5de5\u4f5c",level:2},{value:"1. \u5411\u5356\u5bb6\u8be2\u95ee\u53c2\u8003\u4ee3\u7801\u3001\u89c4\u683c\u4e66\u7b49\u8d44\u6599\u3002",id:"1-\u5411\u5356\u5bb6\u8be2\u95ee\u53c2\u8003\u4ee3\u7801\u89c4\u683c\u4e66\u7b49\u8d44\u6599",level:3},{value:"\u53c2\u8003\u4ee3\u7801\u3001\u6570\u636e\u624b\u518c\u3001\u89c4\u683c\u4e66\u3001\u5de5\u5177",id:"\u53c2\u8003\u4ee3\u7801\u6570\u636e\u624b\u518c\u89c4\u683c\u4e66\u5de5\u5177",level:4},{value:"\u5b98\u65b9\u8f6c\u63a5\u677f PCB \u5de5\u7a0b",id:"\u5b98\u65b9\u8f6c\u63a5\u677f-pcb-\u5de5\u7a0b",level:4},{value:"2. \u6839\u636e\u8d44\u6599\uff0c\u63d0\u53d6\u51fa\u5c4f\u5e55\u7684\u521d\u59cb\u5316\u4ee3\u7801",id:"2-\u6839\u636e\u8d44\u6599\u63d0\u53d6\u51fa\u5c4f\u5e55\u7684\u521d\u59cb\u5316\u4ee3\u7801",level:3},{value:"\u6dfb\u52a0\u663e\u793a\u5c4f\u578b\u53f7\u652f\u6301",id:"\u6dfb\u52a0\u663e\u793a\u5c4f\u578b\u53f7\u652f\u6301",level:2},{value:"\u6dfb\u52a0\u89e6\u6478\u5c4f\u578b\u53f7\u652f\u6301",id:"\u6dfb\u52a0\u89e6\u6478\u5c4f\u578b\u53f7\u652f\u6301",level:2},{value:"\u57fa\u4e8e\u5185\u6838\u73b0\u6709\u7684\u9a71\u52a8",id:"\u57fa\u4e8e\u5185\u6838\u73b0\u6709\u7684\u9a71\u52a8",level:3},{value:"out-of-tree \u9a71\u52a8",id:"out-of-tree-\u9a71\u52a8",level:3}];function o(n){const e={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",p:"p",pre:"pre",...(0,s.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"\u9002\u914d\u65b0\u5c4f\u5e55",children:"\u9002\u914d\u65b0\u5c4f\u5e55"})}),"\n",(0,t.jsxs)(e.p,{children:["\u672c\u6587\u4ecb\u7ecd\u4e86\u5982\u4f55\u5c06\u8be5\u9879\u76ee\u7684\u9a71\u52a8\u7a0b\u5e8f\u9002\u914d\u5230\u65b0\u7684\u5c4f\u5e55\uff0c\u4e0b\u9762\u4ee5 ",(0,t.jsx)(e.a,{href:"https://item.taobao.com/item.htm?_u=o1m6r7hs443f&id=746237125081&spm=a1z09.2.0.0.7df32e8dWy47pb&skuId=5148438405653",children:"CL35BC1017-40A"})," (\u73b0\u6709\u578b\u53f7CL35BC219-40A \u7684 TFT",(0,t.jsx)("sup",{children:"1"})," \u7248\u672c) \u4e3a\u4f8b\u6765\u4ecb\u7ecd\u6574\u4e2a\u9002\u914d\u8fc7\u7a0b\u3002"]}),"\n",(0,t.jsx)(e.h2,{id:"\u51c6\u5907\u5de5\u4f5c",children:"\u51c6\u5907\u5de5\u4f5c"}),"\n",(0,t.jsx)(e.p,{children:"\u9996\u5148\u786e\u5b9a\u76ee\u6807\u5c4f\u5e55\u7684\u63a5\u53e3\u7c7b\u578b\uff0c\u76ee\u524d\u9a71\u52a8\u7a0b\u5e8f\u4ec5\u652f\u6301 SPI \u63a5\u53e3\u7684\u5c4f\u5e55\u3002"}),"\n",(0,t.jsx)(e.h3,{id:"1-\u5411\u5356\u5bb6\u8be2\u95ee\u53c2\u8003\u4ee3\u7801\u89c4\u683c\u4e66\u7b49\u8d44\u6599",children:"1. \u5411\u5356\u5bb6\u8be2\u95ee\u53c2\u8003\u4ee3\u7801\u3001\u89c4\u683c\u4e66\u7b49\u8d44\u6599\u3002"}),"\n",(0,t.jsx)(e.p,{children:"\u5982\u4e0b\u82e5\u5e72\u94fe\u63a5\u662f\u5356\u5bb6\u8981\u63d0\u4f9b\u7684\u8d44\u6599"}),"\n",(0,t.jsx)(e.h4,{id:"\u53c2\u8003\u4ee3\u7801\u6570\u636e\u624b\u518c\u89c4\u683c\u4e66\u5de5\u5177",children:"\u53c2\u8003\u4ee3\u7801\u3001\u6570\u636e\u624b\u518c\u3001\u89c4\u683c\u4e66\u3001\u5de5\u5177"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-c",children:"\u901a\u8fc7\u767e\u5ea6\u7f51\u76d8\u5206\u4eab\u7684\u6587\u4ef6\uff1aCL35BC21...\u7b492\u4e2a\u6587\u4ef6\n\u94fe\u63a5\uff1ahttps://pan.baidu.com/s/1_mew0c8wx63OXkk8YCp92w \n\u63d0\u53d6\u7801\uff1a4ppi \n\u590d\u5236\u8fd9\u6bb5\u5185\u5bb9\u6253\u5f00\u300c\u767e\u5ea6\u7f51\u76d8APP \u5373\u53ef\u83b7\u53d6\u300d\n"})}),"\n",(0,t.jsx)(e.h4,{id:"\u5b98\u65b9\u8f6c\u63a5\u677f-pcb-\u5de5\u7a0b",children:"\u5b98\u65b9\u8f6c\u63a5\u677f PCB \u5de5\u7a0b"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-c",children:"\u901a\u8fc7\u767e\u5ea6\u7f51\u76d8\u5206\u4eab\u7684\u6587\u4ef6\uff1aAD6.9\u5c01\u88c5\u53caCAD\u56fe\u7eb8\n\u94fe\u63a5\uff1ahttps://pan.baidu.com/s/1WeMawyqmnGqY73WaojkwNg \n\u63d0\u53d6\u7801\uff1a6953 \n\u590d\u5236\u8fd9\u6bb5\u5185\u5bb9\u6253\u5f00\u300c\u767e\u5ea6\u7f51\u76d8APP \u5373\u53ef\u83b7\u53d6\u300d\n"})}),"\n",(0,t.jsx)(e.h3,{id:"2-\u6839\u636e\u8d44\u6599\u63d0\u53d6\u51fa\u5c4f\u5e55\u7684\u521d\u59cb\u5316\u4ee3\u7801",children:"2. \u6839\u636e\u8d44\u6599\uff0c\u63d0\u53d6\u51fa\u5c4f\u5e55\u7684\u521d\u59cb\u5316\u4ee3\u7801"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-c",children:"LCD_RST_SET;\ndelay_ms(1);\nLCD_RST_CLR;\ndelay_ms(10);\nLCD_RST_SET;\ndelay_ms(120);\n\n//************* Start Initial Sequence **********//\ndelay_ms(120); // Delay 120ms\n\n// =========== \u4e0a\u9762\u7684\u90e8\u5206\u662f\u590d\u4f4d\u64cd\u4f5c ==================\n\nLCD_WR_REG(0x11); // Sleep Out\ndelay_ms(120); // Delay 120ms\nLCD_WR_REG(0xf0) ;\nLCD_WR_DATA(0xc3) ;\nLCD_WR_REG(0xf0) ;\nLCD_WR_DATA(0x96) ;\nLCD_WR_REG(0x36);\nLCD_WR_DATA(0x48); \nLCD_WR_REG(0x3A);\nLCD_WR_DATA(0x55);\nLCD_WR_REG(0xB4);\nLCD_WR_DATA(0x01);\nLCD_WR_REG(0xB7) ;\nLCD_WR_DATA(0xC6) ;\nLCD_WR_REG(0xe8);\nLCD_WR_DATA(0x40);\nLCD_WR_DATA(0x8a);\nLCD_WR_DATA(0x00);\nLCD_WR_DATA(0x00);\nLCD_WR_DATA(0x29);\nLCD_WR_DATA(0x19);\nLCD_WR_DATA(0xa5);\nLCD_WR_DATA(0x33);\nLCD_WR_REG(0xc1);\nLCD_WR_DATA(0x06);\nLCD_WR_REG(0xc2);\nLCD_WR_DATA(0xa7);\nLCD_WR_REG(0xc5);\nLCD_WR_DATA(0x18);\nLCD_WR_REG(0xe0); //Positive Voltage Gamma Control\nLCD_WR_DATA(0xf0);\nLCD_WR_DATA(0x09);\nLCD_WR_DATA(0x0b);\nLCD_WR_DATA(0x06);\nLCD_WR_DATA(0x04);\nLCD_WR_DATA(0x15);\nLCD_WR_DATA(0x2f);\nLCD_WR_DATA(0x54);\nLCD_WR_DATA(0x42);\nLCD_WR_DATA(0x3c);\nLCD_WR_DATA(0x17);\nLCD_WR_DATA(0x14);\nLCD_WR_DATA(0x18);\nLCD_WR_DATA(0x1b);\nLCD_WR_REG(0xe1); //Negative Voltage Gamma Control\nLCD_WR_DATA(0xf0);\nLCD_WR_DATA(0x09);\nLCD_WR_DATA(0x0b);\nLCD_WR_DATA(0x06);\nLCD_WR_DATA(0x04);\nLCD_WR_DATA(0x03);\nLCD_WR_DATA(0x2d);\nLCD_WR_DATA(0x43);\nLCD_WR_DATA(0x42);\nLCD_WR_DATA(0x3b);\nLCD_WR_DATA(0x16);\nLCD_WR_DATA(0x14);\nLCD_WR_DATA(0x17);\nLCD_WR_DATA(0x1b);\nLCD_WR_REG(0xf0);\nLCD_WR_DATA(0x3c);\nLCD_WR_REG(0xf0);\nLCD_WR_DATA(0x69);\ndelay_ms(120); //Delay 120ms\nLCD_WR_REG(0x29);// Display on\n"})}),"\n",(0,t.jsx)(e.h2,{id:"\u6dfb\u52a0\u663e\u793a\u5c4f\u578b\u53f7\u652f\u6301",children:"\u6dfb\u52a0\u663e\u793a\u5c4f\u578b\u53f7\u652f\u6301"}),"\n",(0,t.jsx)(e.p,{children:"\u5148\u62c9\u53d6\u9a71\u52a8\u4ee3\u7801\u4ed3\u5e93"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"git clone https://github.com/embeddedboys/rpi_dm_yt350s006_software.git\ncd rpi_dm_yt350s006_software\n"})}),"\n",(0,t.jsxs)(e.p,{children:["\u6839\u636e\u63d0\u53d6\u7684\u521d\u59cb\u5316\u4ee3\u7801\uff0c\u7f16\u5199 mipi-cmd \u6e90\u6587\u4ef6\uff0c\u8fd9\u91cc\u65b0\u5efa\u4e00\u4e2a\u6587\u4ef6\u547d\u540d\u4e3a ",(0,t.jsx)(e.a,{href:"https://github.com/embeddedboys/rpi_dm_yt350s006_software/blob/main/rpi-dm-cl35bc1017-40a.txt",children:(0,t.jsx)(e.code,{children:"rpi-dm-cl35bc1017-40a.txt"})}),"\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-c",children:"command 0x11\ndelay 120\ncommand 0xF0 0xC3\ncommand 0xF0 0x96\ncommand 0x36 0x48\ncommand 0x3A 0x55\ncommand 0xB4 0x01\ncommand 0xB7 0xC6\ncommand 0xE8 0x40 0x8A 0x00 0x00 0x29 0x19 0xA5 0x33\ncommand 0xC1 0x06\ncommand 0xC2 0xA7\ncommand 0xC5 0x18\ncommand 0xE0 0xF0 0x09 0x0B 0x06 0x04 0x15 0x2F 0x54 0x42 0x3C 0x17 0x14 0x18 0x1B\ncommand 0xE1 0xF0 0x09 0x0B 0x06 0x04 0x03 0x2D 0x43 0x42 0x3B 0x16 0x14 0x17 0x1B\ncommand 0xF0 0x3C\ncommand 0xF0 0x69\ndelay 120\ncommand 0x29\n"})}),"\n",(0,t.jsxs)(e.p,{children:["\u4fee\u6539 ",(0,t.jsx)(e.a,{href:"https://github.com/embeddedboys/rpi_dm_yt350s006_software/blob/main/Makefile",children:(0,t.jsx)(e.code,{children:"Makefile"})}),"\uff0c\u52a0\u5165\u65b0\u6587\u4ef6\u7684\u7f16\u8bd1\u64cd\u4f5c"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-diff",children:"diff --git a/Makefile b/Makefile\nindex e9526bc..b46fee9 100644\n--- a/Makefile\n+++ b/Makefile\n@@ -4,6 +4,7 @@ all:\n        ./mipi-dbi-cmd rpi-dm-yt350s006.bin rpi-dm-yt350s006.txt\n        ./mipi-dbi-cmd rpi-dm-hp35006.bin rpi-dm-hp35006.txt\n        ./mipi-dbi-cmd rpi-dm-cl35bc219-40a.bin rpi-dm-cl35bc219-40a.txt\n+       ./mipi-dbi-cmd rpi-dm-cl35bc1017-40a.bin rpi-dm-cl35bc1017-40a.txt\n        dtc -@ -Hepapr -I dts -O dtb -o goodix-gt911.dtbo goodix-gt911.dts\n        dtc -@ -Hepapr -I dts -O dtb -o focaltech-ft6236.dtbo focaltech-ft6236.dts\n        dtc -@ -Hepapr -I dts -O dtb -o ti-tsc2007.dtbo ti-tsc2007.dts\n"})}),"\n",(0,t.jsxs)(e.p,{children:["\u4fee\u6539 ",(0,t.jsx)(e.a,{href:"https://github.com/embeddedboys/rpi_dm_yt350s006_software/blob/main/install.sh",children:(0,t.jsx)(e.code,{children:"install.sh"})}),"\uff0c\u6dfb\u52a0\u5b89\u88c5\u8fc7\u7a0b\u4e2d\u7684\u578b\u53f7\u652f\u6301"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-diff",children:'@ -1,6 +1,6 @@\n #!/bin/bash\n \n-valid_disp_models=("YT350S006" "HP35006" "CL35BC219-40A")\n+valid_disp_models=("YT350S006" "HP35006" "CL35BC219-40A" "CL35BC1017-40A")\n valid_touch_models=("GT911" "FT6336" "NS2009" "TSC2007")\n valid_code_servers=("gitee" "github")\n \n@@ -24,7 +24,7 @@ if [ "${RPI_DM_TEST}" = "1" ]; then\n     REBOOT_CMD="echo \u6d4b\u8bd5\u73af\u5883\u4e0d\u9700\u8981\u91cd\u542f"\n     WORK_DIR="${PWD}"\n     mkdir -p "${TEST_DIR}"\n     sudo chmod 777 -R "${TEST_DIR}"\n     echo "test" > ${TARGET_CONFIG}\n else\n     TARGET_CONFIG="/boot/firmware/config.txt"\n@@ -82,6 +82,7 @@ function ask_disp_model()\n     msg_normal "\\t 0. YT350S006"\n     msg_normal "\\t 1. HP35006"\n     msg_normal "\\t 2. CL35BC219-40A"\n+    msg_normal "\\t 3. CL35BC1017-40A"\n     msg_tip "\u68c0\u67e5\u60a8\u8d2d\u4e70\u7684\u5c4f\u5e55FPC\u4e1d\u5370"\n     read -p "\u8bf7\u8f93\u5165\u9009\u62e9 [0]: " model\n     model=${model:-0}\n@@ -203,6 +204,11 @@ function install()\n         sed -i \'s/\\(compatible=\\)[^\\\\]*\\\\0/\\1rpi-dm-cl35bc219-40a\\\\0/\' config_disp.txt\n         sudo cp rpi-dm-cl35bc219-40a.bin ${FIRMWARE_INSTALL_DIR}\n         ;;\n+    "CL35BC1017-40A")\n+        # modified_string=$(echo "$original_string" | sed \'s/\\(compatible=\\)[^\\\\]*\\\\0/\\1rpi-dm-cl35bc1017-40a\\\\0/\')\n+        sed -i \'s/\\(compatible=\\)[^\\\\]*\\\\0/\\1rpi-dm-cl35bc1017-40a\\\\0/\' config_disp.txt\n+        sudo cp rpi-dm-cl35bc1017-40a.bin ${FIRMWARE_INSTALL_DIR}\n+        ;;\n     esac\n     # echo "$modified_string"\n     # cat config_disp.txt\n'})}),"\n",(0,t.jsx)(e.h2,{id:"\u6dfb\u52a0\u89e6\u6478\u5c4f\u578b\u53f7\u652f\u6301",children:"\u6dfb\u52a0\u89e6\u6478\u5c4f\u578b\u53f7\u652f\u6301"}),"\n",(0,t.jsx)(e.h3,{id:"\u57fa\u4e8e\u5185\u6838\u73b0\u6709\u7684\u9a71\u52a8",children:"\u57fa\u4e8e\u5185\u6838\u73b0\u6709\u7684\u9a71\u52a8"}),"\n",(0,t.jsx)(e.h3,{id:"out-of-tree-\u9a71\u52a8",children:"out-of-tree \u9a71\u52a8"}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)("sup",{children:"1"})," TFT \u662f\u6db2\u6676\u5c4f\u7684\u57fa\u7840\u6280\u672f\uff0c\u6210\u672c\u4f4e\uff0c\u4f46\u89c6\u89d2\u548c\u8272\u5f69\u8868\u73b0\u4e00\u822c\uff1b"]}),"\n"]})]})}function l(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(o,{...n})}):o(n)}},8453:(n,e,d)=>{d.d(e,{R:()=>c,x:()=>a});var i=d(6540);const t={},s=i.createContext(t);function c(n){const e=i.useContext(s);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:c(n.components),i.createElement(s.Provider,{value:e},n.children)}}}]);